<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>goçš„pprofä½¿ç”¨ - ShangguanHong</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="ShangguanHong" /><meta name="description" content="åŸæ–‡åœ°å€ï¼šGolang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf å‰è¨€ å†™äº†å‡ å¨ä»£ç ï¼Œå®ç°äº†å‡ ç™¾ä¸ªæ¥å£ã€‚åŠŸèƒ½æµ‹è¯•ä¹Ÿé€šè¿‡äº†ï¼Œç»ˆäºæˆåŠŸçš„éƒ¨ç½²ä¸Šçº¿äº† ç»“æœï¼Œæ€§èƒ½ä¸ä½³ï¼Œä»€ä¹ˆé¬¼ï¼ŸğŸ˜­" /><meta name="keywords" content="go, golang, hugo" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://shangguanhong.github.io/2020/02/26/go%E7%9A%84pprof%E4%BD%BF%E7%94%A8/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="goçš„pprofä½¿ç”¨" />
<meta property="og:description" content="åŸæ–‡åœ°å€ï¼šGolang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf å‰è¨€ å†™äº†å‡ å¨ä»£ç ï¼Œå®ç°äº†å‡ ç™¾ä¸ªæ¥å£ã€‚åŠŸèƒ½æµ‹è¯•ä¹Ÿé€šè¿‡äº†ï¼Œç»ˆäºæˆåŠŸçš„éƒ¨ç½²ä¸Šçº¿äº† ç»“æœï¼Œæ€§èƒ½ä¸ä½³ï¼Œä»€ä¹ˆé¬¼ï¼ŸğŸ˜­" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shangguanhong.github.io/2020/02/26/go%E7%9A%84pprof%E4%BD%BF%E7%94%A8/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-02-26T22:01:46+00:00" />
<meta property="article:modified_time" content="2020-02-26T22:01:46+00:00" />

<meta itemprop="name" content="goçš„pprofä½¿ç”¨">
<meta itemprop="description" content="åŸæ–‡åœ°å€ï¼šGolang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf å‰è¨€ å†™äº†å‡ å¨ä»£ç ï¼Œå®ç°äº†å‡ ç™¾ä¸ªæ¥å£ã€‚åŠŸèƒ½æµ‹è¯•ä¹Ÿé€šè¿‡äº†ï¼Œç»ˆäºæˆåŠŸçš„éƒ¨ç½²ä¸Šçº¿äº† ç»“æœï¼Œæ€§èƒ½ä¸ä½³ï¼Œä»€ä¹ˆé¬¼ï¼ŸğŸ˜­"><meta itemprop="datePublished" content="2020-02-26T22:01:46+00:00" />
<meta itemprop="dateModified" content="2020-02-26T22:01:46+00:00" />
<meta itemprop="wordCount" content="2583">
<meta itemprop="keywords" content="golang," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="goçš„pprofä½¿ç”¨"/>
<meta name="twitter:description" content="åŸæ–‡åœ°å€ï¼šGolang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf å‰è¨€ å†™äº†å‡ å¨ä»£ç ï¼Œå®ç°äº†å‡ ç™¾ä¸ªæ¥å£ã€‚åŠŸèƒ½æµ‹è¯•ä¹Ÿé€šè¿‡äº†ï¼Œç»ˆäºæˆåŠŸçš„éƒ¨ç½²ä¸Šçº¿äº† ç»“æœï¼Œæ€§èƒ½ä¸ä½³ï¼Œä»€ä¹ˆé¬¼ï¼ŸğŸ˜­"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">èµæˆ‘ä¸€ä¸ªå¥½æ¢¦å¦‚æ—§</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">èµæˆ‘ä¸€ä¸ªå¥½æ¢¦å¦‚æ—§</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">goçš„pprofä½¿ç”¨</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-02-26 </span>
        <div class="post-category">
            <a href="/categories/go%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"> Goå­¦ä¹ ç¬”è®° </a>
            </div>
          <span class="more-meta"> çº¦ 2583 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#pprof">PProf</a></li>
    <li><a href="#æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</a></li>
    <li><a href="#æ”¯æŒä»€ä¹ˆä½¿ç”¨æ¨¡å¼">æ”¯æŒä»€ä¹ˆä½¿ç”¨æ¨¡å¼</a></li>
    <li><a href="#å¯ä»¥åšä»€ä¹ˆ">å¯ä»¥åšä»€ä¹ˆ</a></li>
    <li><a href="#ä¸€ä¸ªç®€å•çš„ä¾‹å­">ä¸€ä¸ªç®€å•çš„ä¾‹å­</a></li>
    <li><a href="#åˆ†æ">åˆ†æ</a>
      <ul>
        <li><a href="#ä¸€é€šè¿‡-web-ç•Œé¢">ä¸€ã€é€šè¿‡ Web ç•Œé¢</a></li>
        <li><a href="#äºŒé€šè¿‡äº¤äº’å¼ç»ˆç«¯ä½¿ç”¨">äºŒã€é€šè¿‡äº¤äº’å¼ç»ˆç«¯ä½¿ç”¨</a></li>
        <li><a href="#ä¸‰pprofå¯è§†åŒ–ç•Œé¢">ä¸‰ã€PProfå¯è§†åŒ–ç•Œé¢</a></li>
        <li><a href="#å››pprof-ç«ç„°å›¾">å››ã€PProf ç«ç„°å›¾</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>åŸæ–‡åœ°å€ï¼š<a href="https://book.eddycjy.com/golang/tools/go-tool-pprof.html">Golang å¤§æ€å™¨ä¹‹æ€§èƒ½å‰–æ PProf</a></p>
<h1 id="å‰è¨€">å‰è¨€</h1>
<p>å†™äº†å‡ å¨ä»£ç ï¼Œå®ç°äº†å‡ ç™¾ä¸ªæ¥å£ã€‚åŠŸèƒ½æµ‹è¯•ä¹Ÿé€šè¿‡äº†ï¼Œç»ˆäºæˆåŠŸçš„éƒ¨ç½²ä¸Šçº¿äº†</p>
<p>ç»“æœï¼Œæ€§èƒ½ä¸ä½³ï¼Œä»€ä¹ˆé¬¼ï¼ŸğŸ˜­</p>
<h1 id="æƒ³åšæ€§èƒ½åˆ†æ">æƒ³åšæ€§èƒ½åˆ†æ</h1>
<h2 id="pprof">PProf</h2>
<p>æƒ³è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œé¦–å…ˆç©ç›®åœ¨ Go è‡ªèº«æä¾›çš„å·¥å…·é“¾æ¥ä½œä¸ºåˆ†æä¾æ®ï¼Œæœ¬æ–‡å°†å¸¦ä½ å­¦ä¹ ã€ä½¿ç”¨ Go åèŠ±å›­ï¼Œæ¶‰åŠå¦‚ä¸‹ï¼š</p>
<ul>
<li>runtime/pprofï¼šé‡‡é›†ç¨‹åºï¼ˆé Serverï¼‰çš„è¿è¡Œæ•°æ®è¿›è¡Œåˆ†æ</li>
<li>net/http/pprofï¼šé‡‡é›† HTTP Server çš„è¿è¡Œæ—¶æ•°æ®è¿›è¡Œåˆ†æ</li>
</ul>
<h2 id="æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</h2>
<p>pprof æ˜¯ç”¨äºå¯è§†åŒ–å’Œåˆ†ææ€§èƒ½åˆ†ææ•°æ®çš„å·¥å…·</p>
<p>pprof ä»¥ <a href="https://github.com/google/pprof/blob/master/proto/profile.proto">profile.proto</a> è¯»å–åˆ†ææ ·æœ¬çš„é›†åˆï¼Œå¹¶ç”ŸæˆæŠ¥å‘Šä»¥å¯è§†åŒ–å¹¶å¸®åŠ©åˆ†ææ•°æ®ï¼ˆæ”¯æŒæ–‡æœ¬å’Œå›¾å½¢æŠ¥å‘Šï¼‰</p>
<p>profile.proto æ˜¯ä¸€ä¸ª Protocol Buffer v3 çš„æè¿°æ–‡ä»¶ï¼Œå®ƒæè¿°äº†ä¸€ç»„ callstack å’Œ symbolization ä¿¡æ¯ï¼Œ ä½œç”¨æ˜¯è¡¨ç¤ºç»Ÿè®¡åˆ†æçš„ä¸€ç»„é‡‡æ ·çš„è°ƒç”¨æ ˆï¼Œæ˜¯å¾ˆå¸¸è§çš„ stacktrace é…ç½®æ–‡ä»¶æ ¼å¼</p>
<h2 id="æ”¯æŒä»€ä¹ˆä½¿ç”¨æ¨¡å¼">æ”¯æŒä»€ä¹ˆä½¿ç”¨æ¨¡å¼</h2>
<ul>
<li>Report generationï¼šæŠ¥å‘Šç”Ÿæˆ</li>
<li>Interactive terminal useï¼šäº¤äº’å¼ç»ˆç«¯ä½¿ç”¨</li>
<li>Web interfaceï¼šWeb ç•Œé¢</li>
</ul>
<h2 id="å¯ä»¥åšä»€ä¹ˆ">å¯ä»¥åšä»€ä¹ˆ</h2>
<ul>
<li>CPU Profilingï¼šCPU åˆ†æï¼ŒæŒ‰ç…§ä¸€å®šçš„é¢‘ç‡é‡‡é›†æ‰€ç›‘å¬çš„åº”ç”¨ç¨‹åº CPUï¼ˆå«å¯„å­˜å™¨ï¼‰çš„ä½¿ç”¨æƒ…å†µï¼Œå¯ç¡®å®šåº”ç”¨ç¨‹åºåœ¨ä¸»åŠ¨æ¶ˆè€— CPU å‘¨æœŸæ—¶èŠ±è´¹æ—¶é—´çš„ä½ç½®</li>
<li>Memory Profilingï¼šå†…å­˜åˆ†æï¼Œåœ¨åº”ç”¨ç¨‹åºè¿›è¡Œå †åˆ†é…æ—¶è®°å½•å †æ ˆè·Ÿè¸ªï¼Œç”¨äºç›‘è§†å½“å‰å’Œå†å²å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠæ£€æŸ¥å†…å­˜æ³„æ¼</li>
<li>Block Profilingï¼šé˜»å¡åˆ†æï¼Œè®°å½• goroutine é˜»å¡ç­‰å¾…åŒæ­¥ï¼ˆåŒ…æ‹¬å®šæ—¶å™¨é€šé“ï¼‰çš„ä½ç½®</li>
<li>Mutex Profilingï¼šäº’æ–¥é”åˆ†æï¼ŒæŠ¥å‘Šäº’æ–¥é”çš„ç«äº‰æƒ…å†µ</li>
</ul>
<h2 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h2>
<p>æˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªç®€å•ä¸”æœ‰ç‚¹é—®é¢˜çš„ä¾‹å­ï¼Œç”¨äºåŸºæœ¬çš„ç¨‹åºåˆæ­¥åˆ†æ</p>
<p>demo.goæ–‡ä»¶å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span> <span class="s">&#34;net/http/pprof&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">datas</span> <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;Hello World!&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;0.0.0.0:6060&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sData</span> <span class="o">:=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">datas</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">datas</span><span class="p">,</span> <span class="nx">sData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">sData</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œä½ çš„ HTTP æœåŠ¡ä¼šå¤šå‡º /debug/pprof çš„ endpoint å¯ç”¨äºè§‚å¯Ÿåº”ç”¨ç¨‹åºçš„æƒ…å†µ</p>
<h2 id="åˆ†æ">åˆ†æ</h2>
<h3 id="ä¸€é€šè¿‡-web-ç•Œé¢">ä¸€ã€é€šè¿‡ Web ç•Œé¢</h3>
<p>æŸ¥çœ‹å½“å‰æ€»è§ˆï¼šè®¿é—® <code>http://127.0.0.1:6060/debug/pprof/</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/debug/pprof/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Types of profiles available:
</span></span><span class="line"><span class="cl">Count	Profile
</span></span><span class="line"><span class="cl">26	allocs
</span></span><span class="line"><span class="cl">0	block
</span></span><span class="line"><span class="cl">0	cmdline
</span></span><span class="line"><span class="cl">4	goroutine
</span></span><span class="line"><span class="cl">26	heap
</span></span><span class="line"><span class="cl">0	mutex
</span></span><span class="line"><span class="cl">0	profile
</span></span><span class="line"><span class="cl">8	threadcreate
</span></span><span class="line"><span class="cl">0	trace
</span></span><span class="line"><span class="cl">full goroutine stack dump
</span></span><span class="line"><span class="cl">Profile Descriptions:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">allocs: A sampling of all past memory allocations
</span></span><span class="line"><span class="cl">block: Stack traces that led to blocking on synchronization primitives
</span></span><span class="line"><span class="cl">cmdline: The command line invocation of the current program
</span></span><span class="line"><span class="cl">goroutine: Stack traces of all current goroutines
</span></span><span class="line"><span class="cl">heap: A sampling of memory allocations of live objects. You can specify the gc GET parameter to run GC before taking the heap sample.
</span></span><span class="line"><span class="cl">mutex: Stack traces of holders of contended mutexes
</span></span><span class="line"><span class="cl">profile: CPU profile. You can specify the duration in the seconds GET parameter. After you get the profile file, use the go tool pprof command to investigate the profile.
</span></span><span class="line"><span class="cl">threadcreate: Stack traces that led to the creation of new OS threads
</span></span><span class="line"><span class="cl">trace: A trace of execution of the current program. You can specify the duration in the seconds GET parameter. After you get the trace file, use the go tool trace command to investigate the trace.
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªé¡µé¢æœ‰è®¸å¤šå­é¡µé¢ï¼Œå’±ä»¬ç»§ç»­æ·±ç©¶ä¸‹å»ï¼Œçœ‹çœ‹å¯ä»¥å¾—åˆ°ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>cpuï¼ˆCPU Profilingï¼‰: <code>$HOST/debug/pprof/profile</code>ï¼Œé»˜è®¤è¿›è¡Œ 30s çš„ CPU Profilingï¼Œå¾—åˆ°ä¸€ä¸ªåˆ†æç”¨çš„ profile æ–‡ä»¶</li>
<li>blockï¼ˆBlock Profilingï¼‰ï¼š<code>$HOST/debug/pprof/block</code>ï¼ŒæŸ¥çœ‹å¯¼è‡´é˜»å¡åŒæ­¥çš„å †æ ˆè·Ÿè¸ª</li>
<li>goroutineï¼š<code>$HOST/debug/pprof/goroutine</code>ï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰è¿è¡Œçš„ goroutines å †æ ˆè·Ÿè¸ª</li>
<li>heapï¼ˆMemory Profilingï¼‰: <code>$HOST/debug/pprof/heap</code>ï¼ŒæŸ¥çœ‹æ´»åŠ¨å¯¹è±¡çš„å†…å­˜åˆ†é…æƒ…å†µ</li>
<li>mutexï¼ˆMutex Profilingï¼‰ï¼š<code>$HOST/debug/pprof/mutex</code>ï¼ŒæŸ¥çœ‹å¯¼è‡´äº’æ–¥é”çš„ç«äº‰æŒæœ‰è€…çš„å †æ ˆè·Ÿè¸ª</li>
<li>threadcreateï¼š<code>$HOST/debug/pprof/threadcreate</code>ï¼ŒæŸ¥çœ‹åˆ›å»ºæ–°OSçº¿ç¨‹çš„å †æ ˆè·Ÿè¸ª</li>
</ul>
<h3 id="äºŒé€šè¿‡äº¤äº’å¼ç»ˆç«¯ä½¿ç”¨">äºŒã€é€šè¿‡äº¤äº’å¼ç»ˆç«¯ä½¿ç”¨</h3>
<p>ï¼ˆ1ï¼‰go tool pprof http://localhost:6060/debug/pprof/profile?seconds=60</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ go tool pprof http://localhost:6060/debug/pprof/profile?seconds<span class="o">=</span><span class="m">60</span>
</span></span><span class="line"><span class="cl">Fetching profile over HTTP from http://localhost:6060/debug/pprof/profile?seconds<span class="o">=</span><span class="m">60</span>
</span></span><span class="line"><span class="cl">Saved profile in C:<span class="se">\U</span>sers<span class="se">\f</span>ate<span class="se">\p</span>prof<span class="se">\p</span>prof.samples.cpu.001.pb.gz
</span></span><span class="line"><span class="cl">Type: cpu
</span></span><span class="line"><span class="cl">Time: Feb 26, <span class="m">2020</span> at 10:15pm <span class="o">(</span>CST<span class="o">)</span>
</span></span><span class="line"><span class="cl">Duration: 1mins, Total <span class="nv">samples</span> <span class="o">=</span> 1.06mins <span class="o">(</span>106.05%<span class="o">)</span>
</span></span><span class="line"><span class="cl">Entering interactive mode <span class="o">(</span><span class="nb">type</span> <span class="s2">&#34;help&#34;</span> <span class="k">for</span> commands, <span class="s2">&#34;o&#34;</span> <span class="k">for</span> options<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>pprof<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œéœ€ç­‰å¾… 60 ç§’ï¼ˆå¯è°ƒæ•´ seconds çš„å€¼ï¼‰ï¼Œpprof ä¼šè¿›è¡Œ CPU Profilingã€‚ç»“æŸåå°†é»˜è®¤è¿›å…¥ pprof çš„äº¤äº’å¼å‘½ä»¤æ¨¡å¼ï¼Œå¯ä»¥å¯¹åˆ†æçš„ç»“æœè¿›è¡ŒæŸ¥çœ‹æˆ–å¯¼å‡ºã€‚å…·ä½“å¯æ‰§è¡Œ <code>pprof help</code> æŸ¥çœ‹å‘½ä»¤è¯´æ˜</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">(</span>pprof<span class="o">)</span> top
</span></span><span class="line"><span class="cl">Showing nodes accounting <span class="k">for</span> 50.42s, 79.02% of 63.81s total
</span></span><span class="line"><span class="cl">Dropped <span class="m">154</span> nodes <span class="o">(</span>cum &lt;<span class="o">=</span> 0.32s<span class="o">)</span>
</span></span><span class="line"><span class="cl">Showing top <span class="m">10</span> nodes out of <span class="m">52</span>
</span></span><span class="line"><span class="cl">      flat  flat%   sum%        cum   cum%
</span></span><span class="line"><span class="cl">    41.54s 65.10% 65.10%     42.19s 66.12%  runtime.cgocall
</span></span><span class="line"><span class="cl">     1.42s  2.23% 67.32%      1.78s  2.79%  log.itoa
</span></span><span class="line"><span class="cl">     1.39s  2.18% 69.50%      3.26s  5.11%  runtime.mallocgc
</span></span><span class="line"><span class="cl">     1.21s  1.90% 71.40%      1.21s  1.90%  runtime.memmove
</span></span><span class="line"><span class="cl">     1.05s  1.65% 73.04%      3.73s  5.85%  runtime.scanobject
</span></span><span class="line"><span class="cl">     0.98s  1.54% 74.58%      1.52s  2.38%  runtime.findObject
</span></span><span class="line"><span class="cl">     0.78s  1.22% 75.80%      3.96s  6.21%  log.<span class="o">(</span>*Logger<span class="o">)</span>.formatHeader
</span></span><span class="line"><span class="cl">     0.74s  1.16% 76.96%     51.16s 80.18%  log.<span class="o">(</span>*Logger<span class="o">)</span>.Output
</span></span><span class="line"><span class="cl">     0.73s  1.14% 78.11%      1.24s  1.94%  runtime.greyobject
</span></span><span class="line"><span class="cl">     0.58s  0.91% 79.02%     45.08s 70.65%  internal/poll.<span class="o">(</span>*FD<span class="o">)</span>.Write
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>flatï¼šç»™å®šå‡½æ•°ä¸Šè¿è¡Œè€—æ—¶</li>
<li>flat%ï¼šåŒä¸Šçš„ CPU è¿è¡Œè€—æ—¶æ€»æ¯”ä¾‹</li>
<li>sum%ï¼šç»™å®šå‡½æ•°ç´¯ç§¯ä½¿ç”¨ CPU æ€»æ¯”ä¾‹</li>
<li>cumï¼šå½“å‰å‡½æ•°åŠ ä¸Šå®ƒä¹‹ä¸Šçš„è°ƒç”¨è¿è¡Œæ€»è€—æ—¶</li>
<li>cum%ï¼šåŒä¸Šçš„ CPU è¿è¡Œè€—æ—¶æ€»æ¯”ä¾‹</li>
</ul>
<p>æœ€åä¸€åˆ—ä¸ºå‡½æ•°åç§°ï¼Œåœ¨å¤§å¤šæ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº”åˆ—å¾—å‡ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µï¼ŒåŠ ä»¥ä¼˜åŒ– ğŸ¤”</p>
<p>ï¼ˆ2ï¼‰go tool pprof http://localhost:6060/debug/pprof/heap</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ go tool pprof http://localhost:6060/debug/pprof/heap
</span></span><span class="line"><span class="cl">Fetching profile over HTTP from http://localhost:6060/debug/pprof/heap
</span></span><span class="line"><span class="cl">Saved profile in C:\Users\fate\pprof\pprof.alloc_objects.alloc_space.inuse_objects.inuse_space.002.pb.gz
</span></span><span class="line"><span class="cl">Type: inuse_space
</span></span><span class="line"><span class="cl">Time: Feb 26, 2020 at 10:17pm (CST)
</span></span><span class="line"><span class="cl">Entering interactive mode (type &#34;help&#34; for commands, &#34;o&#34; for options)
</span></span><span class="line"><span class="cl">(pprof) top
</span></span><span class="line"><span class="cl">Showing nodes accounting for 734.09MB, 100% of 734.09MB total
</span></span><span class="line"><span class="cl">      flat  flat%   sum%        cum   cum%
</span></span><span class="line"><span class="cl">  734.09MB   100%   100%   734.09MB   100%  main.Add (inline)
</span></span><span class="line"><span class="cl">         0     0%   100%   734.09MB   100%  main.main.func1
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>-inuse_spaceï¼šåˆ†æåº”ç”¨ç¨‹åºçš„å¸¸é©»å†…å­˜å ç”¨æƒ…å†µ</li>
<li>-alloc_objectsï¼šåˆ†æåº”ç”¨ç¨‹åºçš„å†…å­˜ä¸´æ—¶åˆ†é…æƒ…å†µ</li>
</ul>
<p>ï¼ˆ3ï¼‰ go tool pprof http://localhost:6060/debug/pprof/block</p>
<p>ï¼ˆ4ï¼‰ go tool pprof http://localhost:6060/debug/pprof/mutex</p>
<h3 id="ä¸‰pprofå¯è§†åŒ–ç•Œé¢">ä¸‰ã€PProfå¯è§†åŒ–ç•Œé¢</h3>
<p>è¿™æ˜¯ä»¤äººæœŸå¾…çš„ä¸€å°èŠ‚ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç®€å•çš„ç¼–å†™å¥½æµ‹è¯•ç”¨ä¾‹æ¥è·‘ä¸€ä¸‹</p>
<h4 id="ç¼–å†™æµ‹è¯•ç”¨ä¾‹">ç¼–å†™æµ‹è¯•ç”¨ä¾‹</h4>
<p>ï¼ˆ1ï¼‰æ–°å»º demo_test.goï¼Œæ–‡ä»¶å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;testing&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">url</span> <span class="p">=</span> <span class="s">&#34;Hello World!&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestAdd</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">s</span> <span class="o">:=</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">s</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Test.Add error!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">BenchmarkAdd</span><span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Add</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ï¼ˆ2ï¼‰æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="err">$</span> <span class="k">go</span> <span class="nx">test</span> <span class="nx">bench</span><span class="p">=.</span> <span class="o">-</span><span class="nx">cpuprofile</span><span class="p">=</span><span class="nx">cpu</span><span class="p">.</span><span class="nx">prof</span>
</span></span><span class="line"><span class="cl"><span class="nx">goos</span><span class="p">:</span> <span class="nx">windows</span>
</span></span><span class="line"><span class="cl"><span class="nx">goarch</span><span class="p">:</span> <span class="nx">amd64</span>
</span></span><span class="line"><span class="cl"><span class="nx">pkg</span><span class="p">:</span> <span class="nx">demo</span><span class="o">/</span><span class="nx">gammar</span>
</span></span><span class="line"><span class="cl"><span class="nx">BenchmarkAdd</span><span class="o">-</span><span class="mi">4</span>           <span class="mi">5002905</span>               <span class="mi">228</span> <span class="nx">ns</span><span class="o">/</span><span class="nx">op</span>
</span></span><span class="line"><span class="cl"><span class="nx">PASS</span>
</span></span><span class="line"><span class="cl"><span class="nx">ok</span>      <span class="nx">demo</span><span class="o">/</span><span class="nx">gammar</span>     <span class="mf">2.478</span><span class="nx">s</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>-memprofile ä¹Ÿå¯ä»¥äº†è§£ä¸€ä¸‹</p>
<h4 id="å¯åŠ¨-pprof-å¯è§†åŒ–ç•Œé¢">å¯åŠ¨ PProf å¯è§†åŒ–ç•Œé¢</h4>
<p><strong>æ–¹æ³•ä¸€ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ go tool pprof -http<span class="o">=</span>:8080 cpu.prof	
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ–¹æ³•äºŒï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ go tool pprof cpu.prof
</span></span><span class="line"><span class="cl">$ <span class="o">(</span>pprof<span class="o">)</span> web		
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœå‡ºç°<code>failed to execute dot. Is Graphviz installed? Error: exec: &quot;dot&quot;: executable file not found in %PATH%</code>,å°±æ˜¯æç¤ºä½ è¦å®‰è£… <code>Graphviz</code> äº†(è¯·å³æ‹è°·æ­Œ)</p>
<h4 id="æŸ¥çœ‹-pprof-å¯è§†åŒ–ç•Œé¢">æŸ¥çœ‹ PProf å¯è§†åŒ–ç•Œé¢</h4>
<p>ï¼ˆ1ï¼‰Top</p>
<p><img src="https://raw.githubusercontent.com/ShangguanHong/PictureBed/master/image-20200226222959289.png" alt="image-20200226222959289"></p>
<p>(2) Graph</p>
<p><img src="https://raw.githubusercontent.com/ShangguanHong/PictureBed/master/image-20200226223105986.png" alt="image-20200226223105986"></p>
<p>æ¡†è¶Šå¤§ï¼Œçº¿è¶Šç²—ä»£è¡¨å®ƒå ç”¨çš„æ—¶é—´è¶Šå¤§å“¦</p>
<p>ï¼ˆ3ï¼‰Peek</p>
<p><img src="https://raw.githubusercontent.com/ShangguanHong/PictureBed/master/image-20200226223142402.png" alt="image-20200226223142402"></p>
<p>ï¼ˆ4ï¼‰Source</p>
<p><img src="https://raw.githubusercontent.com/ShangguanHong/PictureBed/master/image-20200226223225867.png" alt="image-20200226223225867"></p>
<p>é€šè¿‡ PProf çš„å¯è§†åŒ–ç•Œé¢ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´æ–¹ä¾¿ã€æ›´ç›´è§‚çš„çœ‹åˆ° Go åº”ç”¨ç¨‹åºçš„è°ƒç”¨é“¾ã€ä½¿ç”¨æƒ…å†µç­‰ï¼Œå¹¶ä¸”åœ¨ View èœå•æ ä¸­ï¼Œè¿˜æ”¯æŒå¦‚ä¸Šå¤šç§æ–¹å¼çš„åˆ‡æ¢</p>
<p>ä½ æƒ³æƒ³ï¼Œåœ¨çƒ¦æ¼ä¸çŸ¥é“ä»€ä¹ˆé—®é¢˜çš„æ—¶å€™ï¼Œèƒ½ç”¨è¿™äº›è¾…åŠ©å·¥å…·æ¥æ£€æµ‹é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯ç¬é—´æ•ˆç‡ç¿»å€äº†å‘¢ ğŸ‘Œ</p>
<h3 id="å››pprof-ç«ç„°å›¾">å››ã€PProf ç«ç„°å›¾</h3>
<p>å¦ä¸€ç§å¯è§†åŒ–æ•°æ®çš„æ–¹æ³•æ˜¯ç«ç„°å›¾ï¼Œéœ€æ‰‹åŠ¨å®‰è£…åŸç”Ÿ PProf å·¥å…·ï¼š</p>
<p>ï¼ˆ1ï¼‰ å®‰è£… PProf</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ go get -u github.com/google/pprof
</span></span></code></pre></td></tr></table>
</div>
</div><p>ï¼ˆ2ï¼‰ å¯åŠ¨ PProf å¯è§†åŒ–ç•Œé¢:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ pprof -http=:8080 cpu.prof
</span></span></code></pre></td></tr></table>
</div>
</div><p>ï¼ˆ3ï¼‰ æŸ¥çœ‹ PProf å¯è§†åŒ–ç•Œé¢</p>
<p>æ‰“å¼€ PProf çš„å¯è§†åŒ–ç•Œé¢æ—¶ï¼Œä½ ä¼šæ˜æ˜¾å‘ç°æ¯”å®˜æ–¹å·¥å…·é“¾çš„ PProf ç²¾è‡´ä¸€äº›ï¼Œå¹¶ä¸”å¤šäº† Flame Graphï¼ˆç«ç„°å›¾ï¼‰</p>
<p>å®ƒå°±æ˜¯æœ¬æ¬¡çš„ç›®æ ‡ä¹‹ä¸€ï¼Œå®ƒçš„æœ€å¤§ä¼˜ç‚¹æ˜¯åŠ¨æ€çš„ã€‚è°ƒç”¨é¡ºåºç”±ä¸Šåˆ°ä¸‹ï¼ˆA -&gt; B -&gt; C -&gt; Dï¼‰ï¼Œæ¯ä¸€å—ä»£è¡¨ä¸€ä¸ªå‡½æ•°ï¼Œè¶Šå¤§ä»£è¡¨å ç”¨ CPU çš„æ—¶é—´æ›´é•¿ã€‚åŒæ—¶å®ƒä¹Ÿæ”¯æŒç‚¹å‡»å—æ·±å…¥è¿›è¡Œåˆ†æï¼</p>
<p><img src="https://raw.githubusercontent.com/ShangguanHong/PictureBed/master/image-20200226223709330.png" alt="image-20200226223709330"></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>åœ¨æœ¬ç« èŠ‚ï¼Œç²—ç•¥åœ°ä»‹ç»äº† Go çš„æ€§èƒ½åˆ©å™¨ PProfã€‚åœ¨ç‰¹å®šçš„åœºæ™¯ä¸­ï¼ŒPProf ç»™å®šä½ã€å‰–æé—®é¢˜å¸¦äº†æå¤§çš„å¸®åŠ©</p>
<p>å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¦å¤–å»ºè®®èƒ½å¤Ÿè‡ªå·±å®é™…æ“ä½œä¸€éï¼Œæœ€å¥½æ˜¯å¯ä»¥æ·±å…¥ç¢ç£¨ä¸€ä¸‹ï¼Œå†…å«å¤§é‡çš„ç”¨æ³•ã€çŸ¥è¯†ç‚¹ ğŸ¤“</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">ShangguanHong</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2020-02-26
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">è®¸å¯åè®®</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/2020/03/02/go%E8%BF%9E%E6%8E%A5mysql/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Goè¿æ¥MySQL</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/2020/02/16/ubuntu18.04%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90/">
            <span class="next-text nav-default">Ubuntu18.04æ›´æ¢å›½å†…æº</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'X0gLmyOh1himl7jHPYcpKKop-gzGzoHsz',
        appKey: 'hoYFzkrMqrD9SyRNpkiNf0LH',
        notify:  false ,
        verify:  false ,
        avatar:'mm',
        placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Šï¼Œå¿«æ´»å•Š!',
        visitor:  false 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:www.sgh1450280694@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/ShangguanHong" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/5590338381" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://space.bilibili.com/105190849" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://shangguanhong.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>ShangguanHong</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
